# 方法一：使用 Mat() 构造函数方法

## 构造函数方法举例

```c++
Mat M(3, 2, CV_8UC3, Scalar(0,0,255));
cout << "M = " << endl << " " << M << endl;
```

第一行代码创建一个行数(高度)为 3,列数(宽度)为 2 的图像,图像元素是 8 位无符号整数类型,且有三个通道。图像的所有像素值被初始化为(0, 0, 255)。由于 OpenCV 中默认的颜色顺序为 BGR,因此这是一个全红色的图像。

第二行代码是输出 Mat 类的实例 M 的所有像素值。 Mat 重定义了 << 操作符,使用这个操作符,可以方便地输出所有像素值,而不需要使用 for 循环逐个像素输出。

```
M = 
 [ 0,   0, 255,   0,   0, 255;
   0,   0, 255,   0,   0, 255;
   0,   0, 255,   0,   0, 255]
```

## 类型的说明

CV_[位数][是否带符号][类型前缀]C[通道数]

CV_8UC3 表示使用 8 位 unsigned char 型，每个像素由三个元素组成三通道。

Scalar 是个 short 型的向量，能使用指定的定制化值来初始化矩阵，它还可以用于表示颜色。如果需要多通道，可以使用大写的宏并把通道数放在小括号里。

## Mat 常用的构造函数

《OpenCV 入门》p24

# 方法二: create() 函数创建对象

除了在构造函数中可以创建图像,也可以使用 Mat 类的 create()函数创建图像。如果 create()函数指定的参数与图像之前的参数相同,则不进行实质的内存申请操作;如果参数不同,则减少原始数据内存的索引,并重新申请内存。使用方法如下面例程所示:

```c++
Mat M(2,2, CV_8UC3);//构造函数创建图像
M.create(3,2, CV_8UC2);//释放内存重新创建图像
```

需要注意的时,使用 create()函数无法设置图像像素的初始值，只是在改变尺寸时重新为矩阵数据开辟内存而已。

# 方法三: Matlab 风格创建对象的方法

OpenCV 2 中提供了 Matlab 风格的函数,如 zeros(),ones()和 eyes()。这种方法使得代码非常简洁,使用起来也非常方便。使用这些函数需要指定图像的大小和类型,使用方法如下:

```c++
Mat Z = Mat::zeros(2,3, CV_8UC1);
cout << "Z = " << endl << " " << Z << endl;
    
Mat O = Mat::ones(2, 3, CV_32F);
cout << "O = " << endl << " " << O << endl;
    
Mat E = Mat::eye(2, 3, CV_64F);
cout << "E = " << endl << " " << E << endl;
```

该代码中,有些 type 参数如 CV_32F 未注明通道数目,这种情况下它表示单通道。

```
Z = 
 [ 0,   0,   0;
   0,   0,   0]
O = 
 [1, 1, 1;
  1, 1, 1]
E = 
 [1, 0, 0;
  0, 1, 0]
```

# 方法四: 逗号分隔形式

```c++
Mat C = (Mat_<double>(3, 3) << 0, 1, 3, 4, 5, 5, 1, 3, 4);
cout << "C = " << endl << " " << C << endl;
```

# 方法五: 为已存在的对象创建新的信息头

```c++
Mat RowClone = C.row(1).clone();
cout << "RowClone = " << endl << " " << RowClone << endl;
```

